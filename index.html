<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Gestion des Invit√©s</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    input[type="text"] {
      padding: 10px;
      width: 100%;
      max-width: 400px;
      margin-bottom: 20px;
      font-size: 1em;
    }

    ul {
      list-style: none;
      padding: 0;
    }

    li {
      padding: 10px;
      border: 1px solid #ccc;
      margin-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .arrive {
      background-color: #28a745;
      color: white;
    }

    .deja {
      background-color: #ffc107;
      color: black;
    }

    .prenom {
      font-weight: bold;
      color: #888;
    }

    .historique {
      margin-top: 30px;
    }

    .historique ul {
      border-top: 1px solid #ccc;
      padding-top: 10px;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
    }
  </style>
</head>
<body>

<h1>Liste des invit√©s</h1>

<input type="text" id="search" placeholder="Rechercher un nom ou pr√©nom...">

<ul id="inviteList"></ul>

<button onclick="resetPresence()">üîÅ R√©initialiser les pr√©sences</button>

<div class="historique">
  <h2>Historique des arriv√©es</h2>
  <ul id="historiqueList"></ul>
</div>

<script>
  const noms = [
    "Berthelin Antoine", "Rouessay Nino", "Daniel Gabin", "Le Flochemo√´n Sofiane",
    "Delaunay Tim√©o", "Rouessay Jules", "Trachida Shevan", "Renault L√©o",
    "Mr dubrez", "Mme cadot", "Mme radchine", "Mr grisel", "Mr Aubry",
    "Mme G√©n√©raux", "Mme Maheut", "Mme poidevin",
    "Surveillant 1", "Surveillant 2", "Surveillant 3", "Surveillant 4",
    "Mathieu Lorenzo", "Sanlaville Lucas"
  ];

  const invites = noms.map((nom, id) => ({ id, nom, status: "absent", heure: null }));

  const listEl = document.getElementById("inviteList");
  const searchEl = document.getElementById("search");
  const historiqueEl = document.getElementById("historiqueList");

  function afficherInvites(filtre = "") {
    listEl.innerHTML = "";
    const filtr√©s = invites.filter(i => i.nom.toLowerCase().includes(filtre.toLowerCase()));
    filtr√©s.forEach(invite => {
      const li = document.createElement("li");
      const [nom, prenom] = invite.nom.split(" ");
      li.innerHTML = `<span>${nom}</span> <span class="prenom">${prenom || ""}</span>`;
      if (invite.status === "arrive") li.classList.add("arrive");
      else if (invite.status === "deja") li.classList.add("deja");

      li.onclick = () => marquerPresence(invite.id, li);
      listEl.appendChild(li);
    });
  }

  function marquerPresence(id, element) {
    const invite = invites.find(i => i.id === id);
    const now = new Date().toLocaleTimeString();

    if (invite.status === "absent") {
      invite.status = "arrive";
      invite.heure = now;
      ajouterHistorique(invite.nom, now);
      element.classList.add("arrive");
      setTimeout(() => element.classList.remove("arrive"), 2000);
    } else if (invite.status === "arrive") {
      invite.status = "deja";
      element.classList.remove("arrive");
      element.classList.add("deja");
      setTimeout(() => element.classList.remove("deja"), 2000);
    }
  }

  function ajouterHistorique(nom, heure) {
    const li = document.createElement("li");
    li.textContent = `${nom} - arriv√© √† ${heure}`;
    historiqueEl.prepend(li);
  }

  function resetPresence() {
    invites.forEach(i => {
      i.status = "absent";
      i.heure = null;
    });
    historiqueEl.innerHTML = "";
    afficherInvites(searchEl.value);
  }

  searchEl.addEventListener("input", () => {
    afficherInvites(searchEl.value);
  });

  afficherInvites();
</script>

</body>
</html>
